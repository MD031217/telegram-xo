<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö—Ä–µ—Å—Ç–∏–∫–∏-–Ω–æ–ª–∏–∫–∏ 5 –≤ —Ä—è–¥</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            color: #333;
        }
        
        .container {
            max-width: 1200px;
            width: 100%;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            padding: 30px;
            margin-top: 20px;
        }
        
        h1 {
            text-align: center;
            color: white;
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .subtitle {
            text-align: center;
            color: white;
            font-size: 1.2em;
            margin-bottom: 30px;
            opacity: 0.9;
        }
        
        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding: 0 10px;
        }
        
        .game-info {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .status {
            font-size: 1.4em;
            font-weight: bold;
            color: #2c3e50;
            padding: 12px 20px;
            background: #ecf0f1;
            border-radius: 10px;
            border-left: 4px solid #3498db;
        }
        
        .score {
            font-size: 1.1em;
            color: #7f8c8d;
        }
        
        .controls {
            display: flex;
            gap: 12px;
        }
        
        .btn {
            padding: 12px 24px;
            font-size: 1em;
            font-weight: 600;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: #3498db;
            color: white;
        }
        
        .btn-primary:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }
        
        .btn-success {
            background: #2ecc71;
            color: white;
        }
        
        .btn-success:hover {
            background: #27ae60;
            transform: translateY(-2px);
        }
        
        .btn-danger {
            background: #e74c3c;
            color: white;
        }
        
        .btn-danger:hover {
            background: #c0392b;
            transform: translateY(-2px);
        }
        
        .game-area {
            display: flex;
            gap: 30px;
            align-items: flex-start;
        }
        
        .board-container {
            flex: 1;
            position: relative;
            background: #f8f9fa;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.1);
            min-height: 600px;
        }
        
        #gameBoard {
            position: relative;
            width: 100%;
            height: 100%;
            min-height: 600px;
            cursor: grab;
            transition: transform 0.1s ease-out;
        }
        
        #gameBoard:active {
            cursor: grabbing;
        }
        
        .cell {
            position: absolute;
            width: 40px;
            height: 40px;
            cursor: pointer;
            transition: all 0.2s ease;
            border-radius: 50%;
        }
        
        .cell:hover {
            background: rgba(52, 152, 219, 0.1);
            transform: scale(1.1);
        }
        
        .cell::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border-radius: 50%;
            transition: all 0.3s ease;
        }
        
        .cell.x::before {
            width: 30px;
            height: 30px;
            background: #e74c3c;
            box-shadow: 0 3px 6px rgba(231, 76, 60, 0.3);
        }
        
        .cell.o::before {
            width: 30px;
            height: 30px;
            background: #3498db;
            box-shadow: 0 3px 6px rgba(52, 152, 219, 0.3);
        }
        
        .grid-line {
            position: absolute;
            background: #bdc3c7;
            pointer-events: none;
        }
        
        .grid-line.horizontal {
            width: 100%;
            height: 1px;
            left: 0;
        }
        
        .grid-line.vertical {
            height: 100%;
            width: 1px;
            top: 0;
        }
        
        .center-marker {
            position: absolute;
            width: 8px;
            height: 8px;
            background: #e74c3c;
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10;
        }
        
        .coordinates {
            position: absolute;
            font-size: 10px;
            color: #95a5a6;
            pointer-events: none;
            z-index: 5;
            background: rgba(255,255,255,0.8);
            padding: 2px 4px;
            border-radius: 3px;
        }
        
        .sidebar {
            width: 300px;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .sidebar-section {
            margin-bottom: 25px;
        }
        
        .sidebar-title {
            font-size: 1.2em;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #3498db;
        }
        
        .zoom-controls {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .zoom-btn {
            width: 40px;
            height: 40px;
            border: none;
            background: #ecf0f1;
            border-radius: 8px;
            font-size: 1.2em;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .zoom-btn:hover {
            background: #3498db;
            color: white;
        }
        
        .zoom-level {
            font-weight: bold;
            color: #2c3e50;
            min-width: 60px;
            text-align: center;
        }
        
        .view-controls {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .view-btn {
            padding: 10px 15px;
            background: #ecf0f1;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: left;
        }
        
        .view-btn:hover {
            background: #3498db;
            color: white;
        }
        
        .last-moves {
            max-height: 200px;
            overflow-y: auto;
        }
        
        .move-item {
            padding: 8px 12px;
            background: white;
            margin-bottom: 8px;
            border-radius: 6px;
            border-left: 3px solid #3498db;
            font-size: 0.9em;
        }
        
        .move-item.x {
            border-left-color: #e74c3c;
        }
        
        .move-item.o {
            border-left-color: #3498db;
        }
        
        .win-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255,255,255,0.95);
            padding: 40px 60px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            z-index: 1000;
            animation: popIn 0.5s ease;
        }
        
        @keyframes popIn {
            0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }
        
        .win-title {
            font-size: 2em;
            color: #2c3e50;
            margin-bottom: 15px;
        }
        
        .win-subtitle {
            color: #7f8c8d;
            margin-bottom: 25px;
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        @media (max-width: 768px) {
            .game-area {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
            }
            
            .game-header {
                flex-direction: column;
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <h1>üéØ –ö—Ä–µ—Å—Ç–∏–∫–∏-–Ω–æ–ª–∏–∫–∏ 5 –≤ —Ä—è–¥</h1>
    <div class="subtitle">–ë–µ—Å–∫–æ–Ω–µ—á–Ω–æ–µ –ø–æ–ª–µ ‚Ä¢ –£–º–Ω—ã–π –±–æ—Ç ‚Ä¢ –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å</div>
    
    <div class="container">
        <div class="game-header">
            <div class="game-info">
                <div class="status" id="status">–í–∞—à —Ö–æ–¥ (–ö—Ä–µ—Å—Ç–∏–∫–∏)</div>
                <div class="score" id="score">–•–æ–¥–æ–≤: 0</div>
            </div>
            <div class="controls">
                <button class="btn btn-primary" onclick="makeBotMove()" id="botMoveBtn">
                    ü§ñ –•–æ–¥ –±–æ—Ç–∞
                </button>
                <button class="btn btn-success" onclick="initGame()" id="resetBtn">
                    üîÑ –ù–æ–≤–∞—è –∏–≥—Ä–∞
                </button>
            </div>
        </div>
        
        <div class="game-area">
            <div class="board-container">
                <div id="gameBoard">
                    <!-- –ò–≥—Ä–æ–≤–∞—è –¥–æ—Å–∫–∞ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–∞ –∑–¥–µ—Å—å -->
                    <div class="center-marker"></div>
                </div>
            </div>
            
            <div class="sidebar">
                <div class="sidebar-section">
                    <div class="sidebar-title">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∏–¥–æ–º</div>
                    <div class="zoom-controls">
                        <button class="zoom-btn" onclick="zoomOut()">-</button>
                        <div class="zoom-level" id="zoomLevel">100%</div>
                        <button class="zoom-btn" onclick="zoomIn()">+</button>
                    </div>
                    <div class="view-controls">
                        <button class="view-btn" onclick="resetView()">üéØ –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–µ</button>
                        <button class="view-btn" onclick="showLastMove()">üìç –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ö–æ–¥</button>
                        <button class="view-btn" onclick="toggleCoordinates()">üìê –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: –í–∫–ª</button>
                    </div>
                </div>
                
                <div class="sidebar-section">
                    <div class="sidebar-title">–ü–æ—Å–ª–µ–¥–Ω–∏–µ —Ö–æ–¥—ã</div>
                    <div class="last-moves" id="lastMoves">
                        <div class="move-item">–ò–≥—Ä–∞ –µ—â–µ –Ω–µ –Ω–∞—á–∞–ª–∞—Å—å</div>
                    </div>
                </div>
                
                <div class="sidebar-section">
                    <div class="sidebar-title">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</div>
                    <div style="font-size: 0.9em; color: #7f8c8d; line-height: 1.5;">
                        <p>‚Ä¢ <strong>–õ–ö–ú</strong> - —Å–¥–µ–ª–∞—Ç—å —Ö–æ–¥</p>
                        <p>‚Ä¢ <strong>–ü–ö–ú + –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ</strong> - –¥–≤–∏–≥–∞—Ç—å –ø–æ–ª–µ</p>
                        <p>‚Ä¢ <strong>–ö–æ–ª–µ—Å–æ –º—ã—à–∏</strong> - –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å</p>
                        <p>‚Ä¢ <strong>–¶–µ–ª—å</strong> - —Å–æ–±—Ä–∞—Ç—å 5 –≤ —Ä—è–¥</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–≥—Ä—ã
        const CONFIG = {
            WIN_LENGTH: 5,
            CELL_SIZE: 40,
            GRID_SIZE: 31, // –ù–µ—á–µ—Ç–Ω–æ–µ —á–∏—Å–ª–æ –¥–ª—è —Å–∏–º–º–µ—Ç—Ä–∏–∏
            ZOOM_LEVELS: [0.3, 0.5, 0.75, 1, 1.25, 1.5, 2, 3],
            INITIAL_ZOOM: 3
        };

        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
        let gameState = {
            board: {},
            currentPlayer: 'x',
            gameOver: false,
            zoomLevel: CONFIG.INITIAL_ZOOM,
            viewOffset: { x: 0, y: 0 },
            lastMoves: [],
            moveCount: 0,
            showCoordinates: true
        };

        // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
        const gameBoard = document.getElementById('gameBoard');
        const statusElement = document.getElementById('status');
        const scoreElement = document.getElementById('score');
        const zoomLevelElement = document.getElementById('zoomLevel');
        const lastMovesElement = document.getElementById('lastMoves');

        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è
        let isDragging = false;
        let lastMouseX, lastMouseY;
        let animationFrameId;

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        function initGame() {
            gameState = {
                board: {},
                currentPlayer: 'x',
                gameOver: false,
                zoomLevel: CONFIG.INITIAL_ZOOM,
                viewOffset: { x: 0, y: 0 },
                lastMoves: [],
                moveCount: 0,
                showCoordinates: true
            };
            
            statusElement.textContent = '–í–∞—à —Ö–æ–¥ (–ö—Ä–µ—Å—Ç–∏–∫–∏)';
            statusElement.style.borderLeftColor = '#e74c3c';
            scoreElement.textContent = '–•–æ–¥–æ–≤: 0';
            updateLastMoves();
            updateZoom();
            renderBoard();
            resetView();
            
            // –£–±–∏—Ä–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –ø–æ–±–µ–¥–µ –µ—Å–ª–∏ –±—ã–ª–æ
            const winMessage = document.querySelector('.win-message');
            if (winMessage) winMessage.remove();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∞—Å—à—Ç–∞–±–∞
        function updateZoom() {
            const scale = CONFIG.ZOOM_LEVELS[gameState.zoomLevel];
            gameBoard.style.transform = `scale(${scale})`;
            zoomLevelElement.textContent = `${Math.round(scale * 100)}%`;
        }

        function zoomIn() {
            if (gameState.zoomLevel < CONFIG.ZOOM_LEVELS.length - 1) {
                gameState.zoomLevel++;
                updateZoom();
                renderBoard();
            }
        }

        function zoomOut() {
            if (gameState.zoomLevel > 0) {
                gameState.zoomLevel--;
                updateZoom();
                renderBoard();
            }
        }

        function resetView() {
            gameState.viewOffset = { x: 0, y: 0 };
            renderBoard();
        }

        function showLastMove() {
            if (gameState.lastMoves.length > 0) {
                const lastMove = gameState.lastMoves[gameState.lastMoves.length - 1];
                centerOnCell(lastMove.x, lastMove.y);
            }
        }

        function toggleCoordinates() {
            gameState.showCoordinates = !gameState.showCoordinates;
            document.querySelector('.view-btn:nth-child(3)').textContent = 
                `üìê –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: ${gameState.showCoordinates ? '–í–∫–ª' : '–í—ã–∫–ª'}`;
            renderBoard();
        }

        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∏–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è
        function renderBoard() {
            gameBoard.innerHTML = '';
            
            const scale = CONFIG.ZOOM_LEVELS[gameState.zoomLevel];
            const boardSize = CONFIG.GRID_SIZE * CONFIG.CELL_SIZE;
            const offsetX = gameState.viewOffset.x * CONFIG.CELL_SIZE;
            const offsetY = gameState.viewOffset.y * CONFIG.CELL_SIZE;
            
            // –°–µ—Ç–∫–∞
            for (let i = -Math.floor(CONFIG.GRID_SIZE/2); i <= Math.floor(CONFIG.GRID_SIZE/2); i++) {
                // –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ –ª–∏–Ω–∏–∏
                const hLine = document.createElement('div');
                hLine.className = 'grid-line horizontal';
                hLine.style.top = `${boardSize/2 + i * CONFIG.CELL_SIZE - offsetY}px`;
                gameBoard.appendChild(hLine);
                
                // –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ –ª–∏–Ω–∏–∏
                const vLine = document.createElement('div');
                vLine.className = 'grid-line vertical';
                vLine.style.left = `${boardSize/2 + i * CONFIG.CELL_SIZE - offsetX}px`;
                gameBoard.appendChild(vLine);
            }
            
            // –ö–ª–µ—Ç–∫–∏ –∏ —Ñ–∏–≥—É—Ä—ã
            for (let x = -Math.floor(CONFIG.GRID_SIZE/2); x <= Math.floor(CONFIG.GRID_SIZE/2); x++) {
                for (let y = -Math.floor(CONFIG.GRID_SIZE/2); y <= Math.floor(CONFIG.GRID_SIZE/2); y++) {
                    const cell = document.createElement('div');
                    cell.className = 'cell';
                    cell.dataset.x = x;
                    cell.dataset.y = y;
                    
                    // –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
                    cell.style.left = `${boardSize/2 + x * CONFIG.CELL_SIZE - offsetX - CONFIG.CELL_SIZE/2}px`;
                    cell.style.top = `${boardSize/2 + y * CONFIG.CELL_SIZE - offsetY - CONFIG.CELL_SIZE/2}px`;
                    
                    // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ñ–∏–≥—É—Ä
                    const key = `${x},${y}`;
                    if (gameState.board[key]) {
                        cell.classList.add(gameState.board[key]);
                    }
                    
                    // –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
                    if (gameState.showCoordinates && (x === 0 || y === 0 || Math.abs(x) === Math.floor(CONFIG.GRID_SIZE/2) || Math.abs(y) === Math.floor(CONFIG.GRID_SIZE/2))) {
                        const coords = document.createElement('div');
                        coords.className = 'coordinates';
                        coords.textContent = `${x},${y}`;
                        coords.style.left = `${CONFIG.CELL_SIZE/2}px`;
                        coords.style.top = `${CONFIG.CELL_SIZE/2}px`;
                        cell.appendChild(coords);
                    }
                    
                    cell.addEventListener('click', () => makeMove(x, y));
                    gameBoard.appendChild(cell);
                }
            }
            
            // –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –º–∞—Ä–∫–µ—Ä
            const centerMarker = document.createElement('div');
            centerMarker.className = 'center-marker';
            centerMarker.style.left = `${boardSize/2 - offsetX}px`;
            centerMarker.style.top = `${boardSize/2 - offsetY}px`;
            gameBoard.appendChild(centerMarker);
        }

        // –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ö–æ–¥–∞
        function makeMove(x, y) {
            if (gameState.gameOver || gameState.currentPlayer !== 'x') return;
            
            const key = `${x},${y}`;
            if (gameState.board[key]) return;
            
            gameState.board[key] = 'x';
            gameState.lastMoves.push({ x, y, player: 'x' });
            gameState.moveCount++;
            
            updateLastMoves();
            scoreElement.textContent = `–•–æ–¥–æ–≤: ${gameState.moveCount}`;
            
            if (checkWin(x, y, 'x')) {
                showWinMessage('üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –ø–æ–±–µ–¥–∏–ª–∏!');
                return;
            }
            
            gameState.currentPlayer = 'o';
            statusElement.textContent = '–•–æ–¥ –±–æ—Ç–∞ (–ù–æ–ª–∏–∫–∏)...';
            statusElement.style.borderLeftColor = '#3498db';
            
            renderBoard();
            
            // –•–æ–¥ –±–æ—Ç–∞ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π
            setTimeout(makeBotMove, 800);
        }

        // –•–æ–¥ –±–æ—Ç–∞
        function makeBotMove() {
            if (gameState.gameOver) return;
            
            const move = findBestMove();
            if (move) {
                const { x, y } = move;
                const key = `${x},${y}`;
                gameState.board[key] = 'o';
                gameState.lastMoves.push({ x, y, player: 'o' });
                gameState.moveCount++;
                
                updateLastMoves();
                scoreElement.textContent = `–•–æ–¥–æ–≤: ${gameState.moveCount}`;
                
                if (checkWin(x, y, 'o')) {
                    showWinMessage('ü§ñ –ë–æ—Ç –ø–æ–±–µ–¥–∏–ª! –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑!');
                    return;
                }
                
                gameState.currentPlayer = 'x';
                statusElement.textContent = '–í–∞—à —Ö–æ–¥ (–ö—Ä–µ—Å—Ç–∏–∫–∏)';
                statusElement.style.borderLeftColor = '#e74c3c';
                
                renderBoard();
                centerOnCell(x, y);
            }
        }

        // –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –∫–ª–µ—Ç–∫–µ
        function centerOnCell(x, y) {
            const scale = CONFIG.ZOOM_LEVELS[gameState.zoomLevel];
            gameState.viewOffset.x = -x;
            gameState.viewOffset.y = -y;
            renderBoard();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Ö–æ–¥–æ–≤
        function updateLastMoves() {
            lastMovesElement.innerHTML = '';
            const recentMoves = gameState.lastMoves.slice(-10).reverse();
            
            if (recentMoves.length === 0) {
                lastMovesElement.innerHTML = '<div class="move-item">–ò–≥—Ä–∞ –µ—â–µ –Ω–µ –Ω–∞—á–∞–ª–∞—Å—å</div>';
                return;
            }
            
            recentMoves.forEach(move => {
                const moveItem = document.createElement('div');
                moveItem.className = `move-item ${move.player}`;
                const playerSymbol = move.player === 'x' ? '‚ùå' : '‚≠ï';
                moveItem.textContent = `${playerSymbol} (${move.x}, ${move.y})`;
                lastMovesElement.appendChild(moveItem);
            });
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –ø–æ–±–µ–¥–µ
        function showWinMessage(message) {
            gameState.gameOver = true;
            
            const winMessage = document.createElement('div');
            winMessage.className = 'win-message pulse';
            winMessage.innerHTML = `
                <div class="win-title">${message}</div>
                <div class="win-subtitle">–°–¥–µ–ª–∞–Ω–æ —Ö–æ–¥–æ–≤: ${gameState.moveCount}</div>
                <button class="btn btn-success" onclick="initGame()" style="margin-top: 15px;">
                    üîÑ –ù–æ–≤–∞—è –∏–≥—Ä–∞
                </button>
            `;
            
            document.body.appendChild(winMessage);
        }

        // –ê–ª–≥–æ—Ä–∏—Ç–º –±–æ—Ç–∞ (—É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
        function findBestMove() {
            const candidateMoves = new Set();
            
            // –°–æ–±–∏—Ä–∞–µ–º –∫–ª–µ—Ç–∫–∏ –≤–æ–∫—Ä—É–≥ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∏–≥—É—Ä
            Object.keys(gameState.board).forEach(key => {
                const [x, y] = key.split(',').map(Number);
                for (let dx = -2; dx <= 2; dx++) {
                    for (let dy = -2; dy <= 2; dy++) {
                        if (dx === 0 && dy === 0) continue;
                        const newX = x + dx;
                        const newY = y + dy;
                        const newKey = `${newX},${newY}`;
                        if (!gameState.board[newKey]) {
                            candidateMoves.add(newKey);
                        }
                    }
                }
            });
            
            // –ï—Å–ª–∏ –ø–æ–ª–µ –ø—É—Å—Ç–æ–µ, –Ω–∞—á–∏–Ω–∞–µ–º —Å —Ü–µ–Ω—Ç—Ä–∞
            if (candidateMoves.size === 0) return { x: 0, y: 0 };
            
            // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ –º–∞—Å—Å–∏–≤ –¥–ª—è –æ—Ü–µ–Ω–∫–∏
            const movesArray = Array.from(candidateMoves).map(key => {
                const [x, y] = key.split(',').map(Number);
                return { x, y, score: evaluatePosition(x, y, 'o') };
            });
            
            // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –æ—Ü–µ–Ω–∫–µ –∏ –±–µ—Ä–µ–º –ª—É—á—à–∏–π —Ö–æ–¥
            movesArray.sort((a, b) => b.score - a.score);
            return movesArray[0];
        }

        // –û—Ü–µ–Ω–∫–∞ –ø–æ–∑–∏—Ü–∏–∏
        function evaluatePosition(x, y, player) {
            let score = 0;
            const directions = [
                { dx: 1, dy: 0 }, { dx: 0, dy: 1 }, 
                { dx: 1, dy: 1 }, { dx: 1, dy: -1 }
            ];
            
            directions.forEach(dir => {
                let playerCount = 0;
                let emptyCount = 0;
                
                for (let i = -4; i <= 4; i++) {
                    const checkX = x + dir.dx * i;
                    const checkY = y + dir.dy * i;
                    const key = `${checkX},${checkY}`;
                    
                    if (i === 0) continue; // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—É—é –∫–ª–µ—Ç–∫—É
                    
                    if (gameState.board[key] === player) {
                        playerCount++;
                    } else if (!gameState.board[key]) {
                        emptyCount++;
                    }
                }
                
                if (playerCount >= 4) score += 1000;
                else if (playerCount === 3 && emptyCount >= 1) score += 100;
                else if (playerCount === 2) score += 10;
            });
            
            return score;
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–±–µ–¥—ã
        function checkWin(x, y, player) {
            const directions = [
                { dx: 1, dy: 0 }, { dx: 0, dy: 1 }, 
                { dx: 1, dy: 1 }, { dx: 1, dy: -1 }
            ];
            
            for (const dir of directions) {
                let count = 1;
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤ –æ–¥–Ω–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏
                for (let i = 1; i < CONFIG.WIN_LENGTH; i++) {
                    const checkX = x + dir.dx * i;
                    const checkY = y + dir.dy * i;
                    if (gameState.board[`${checkX},${checkY}`] === player) {
                        count++;
                    } else {
                        break;
                    }
                }
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏
                for (let i = 1; i < CONFIG.WIN_LENGTH; i++) {
                    const checkX = x - dir.dx * i;
                    const checkY = y - dir.dy * i;
                    if (gameState.board[`${checkX},${checkY}`] === player) {
                        count++;
                    } else {
                        break;
                    }
                }
                
                if (count >= CONFIG.WIN_LENGTH) return true;
            }
            
            return false;
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è
        gameBoard.addEventListener('mousedown', (e) => {
            if (e.button === 2) { // –ü—Ä–∞–≤–∞—è –∫–Ω–æ–ø–∫–∞ –º—ã—à–∏
                isDragging = true;
                lastMouseX = e.clientX;
                lastMouseY = e.clientY;
                gameBoard.style.cursor = 'grabbing';
                e.preventDefault();
            }
        });

        document.addEventListener('mousemove', (e) => {
            if (!isDragging) return;
            
            const deltaX = e.clientX - lastMouseX;
            const deltaY = e.clientY - lastMouseY;
            
            const scale = CONFIG.ZOOM_LEVELS[gameState.zoomLevel];
            gameState.viewOffset.x += deltaX / (CONFIG.CELL_SIZE * scale);
            gameState.viewOffset.y += deltaY / (CONFIG.CELL_SIZE * scale);
            
            lastMouseX = e.clientX;
            lastMouseY = e.clientY;
            
            // –ò—Å–ø–æ–ª—å–∑—É–µ–º requestAnimationFrame –¥–ª—è –ø–ª–∞–≤–Ω–æ—Å—Ç–∏
            if (animationFrameId) cancelAnimationFrame(animationFrameId);
            animationFrameId = requestAnimationFrame(() => renderBoard());
        });

        document.addEventListener('mouseup', () => {
            isDragging = false;
            gameBoard.style.cursor = 'grab';
            if (animationFrameId) cancelAnimationFrame(animationFrameId);
        });

        // –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–ª–µ—Å–æ–º –º—ã—à–∏
        gameBoard.addEventListener('wheel', (e) => {
            e.preventDefault();
            if (e.deltaY < 0) {
                zoomIn();
            } else {
                zoomOut();
            }
        });

        // –ó–∞–ø—Ä–µ—â–∞–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é –Ω–∞ –ø–æ–ª–µ
        gameBoard.addEventListener('contextmenu', (e) => e.preventDefault());

        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
        window.addEventListener('load', initGame);
    </script>
</body>
</html>
